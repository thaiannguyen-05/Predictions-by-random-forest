model User {
    id             String   @id @default(uuid()) @map("user_id") @db.Uuid
    email          String   @unique @map("email_address")
    avtUrl         String?  @map("avt_url")
    username       String   @unique @map("user_name")
    firstName      String   @map("first_name")
    lastName       String   @map("last_name")
    hashedPassword String?  @map("hashed_password")
    phoneNumber    String?  @map("phone_number")
    dateOfBirth    DateTime @map("birth_or_date")
    isActive       Boolean  @default(false) @map("is_active")
    createdAt      DateTime @default(now()) @map("created_at")
    updatedAt      DateTime @updatedAt @map("updated_at")
    picture        String?

    // relations
    userDevice UserDevice[]
    sessions   Session[]
    codes      Code[]

    @@index([username])
    @@index([email])
    @@index([createdAt])
    @@map("users") // Changed to plural form which is common in PostgreSQL
}

model Oauth2User {
    id             String   @id @default(uuid()) @db.Uuid
    provider       Provider
    providerUserId String   @map("provider_user_id") @db.VarChar(500)
    email          String   @unique @db.VarChar(255)
    phone          String?  @db.VarChar(20)
    firstname      String?  @db.VarChar(50)
    lastname       String?  @db.VarChar(50)
    fullname       String?  @db.VarChar(50)
    avatarUrl      String?  @map("avatar_url") @db.VarChar(500)
    username       String?  @db.VarChar(50)
    createdAt      DateTime @default(now()) @map("created_at") @db.Timestamptz()
    updatedAt      DateTime @updatedAt @map("updated_at") @db.Timestamptz()

    @@map("oauth2_user")
}

enum Provider {
    FACEBOOK
    GOOGLE
}

enum CodeType {
    VERIFICATION
    PASSWORD_RESET
    EMAIL_CHANGE
    PHONE_CHANGE
}
